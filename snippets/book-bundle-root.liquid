{% comment %}
  Root element for the React Book Bundle App.
  This snippet loads the JS and CSS assets required for the app.
{% endcomment %}

<!-- Root container for React -->
<script>
  window.shopifyBookData = [
  {% paginate collections.all.products by 250 %}
    {% for product in collections.all.products %}
      {% unless product.handle == '7-book-bundle' %}
        {
          id: {{ product.id }},
          title: {{ product.title | json }},
          author: {{ product.vendor | json }},
          description: {{ product.content | strip_html | truncate: 150 | json }},
          coverUrl: "{% if product.featured_image %}{{ product.featured_image | image_url: width: 600 }}{% else %}https://placehold.co/400x600?text=No+Cover{% endif %}"
        }{% unless forloop.last %},{% endunless %}
      {% endunless %}
    {% endfor %}
  {% endpaginate %}
  ];
</script>
<div id="root" class="book-bundle-container"></div>

<!-- Load compiled CSS -->
{{ 'book-bundle.css' | asset_url | stylesheet_tag }}

<!-- Load compiled JS (defer to ensure DOM is ready) -->
<script src="{{ 'book-bundle.js' | asset_url }}" defer="defer"></script>

<style>
  /* Ensure the container takes full width if needed, or resets theme constraints */
  .book-bundle-container {
    width: 100%;
    min-height: 100vh;
  }
</style>
