{%- liquid
  assign product_obj = product | default: nil
  assign product_rating = 4.9
  assign product_reviews_count = 128

  if product_obj and product_obj.metafields.reviews.average
    assign product_rating = product_obj.metafields.reviews.average
  elsif product_obj and product_obj.metafields.global.rating
    assign product_rating = product_obj.metafields.global.rating
  endif

  if product_obj and product_obj.metafields.reviews.count
    assign product_reviews_count = product_obj.metafields.reviews.count
  elsif product_obj and product_obj.metafields.global.rating_count
    assign product_reviews_count = product_obj.metafields.global.rating_count
  endif
-%}

<section class="product-reviews" aria-labelledby="product-reviews-heading">
  <div class="product-reviews__inner">
    <header class="product-reviews__header">
      <div class="product-reviews__header-copy">
        <h2 id="product-reviews-heading">Loved by modern teams everywhere</h2>
        <p>High-performing teams lean on our ritual to stay coordinated, grounded, and ready for the week ahead. Here’s what they have to say.</p>
      </div>
      <div class="product-reviews__summary" role="img" aria-label="Rated {{ product_rating | round: 1 }} out of 5 stars based on {{ product_reviews_count }} reviews">
        <span class="product-reviews__summary-stars" aria-hidden="true">{%- render 'star-rating', rating: product_rating -%}</span>
        <div class="product-reviews__summary-score">
          <strong>{{ product_rating | round: 1 }}</strong>
          <span>Average rating</span>
        </div>
        <p class="product-reviews__summary-count">Based on {{ product_reviews_count }} verified reviews</p>
      </div>
    </header>

    <div class="product-reviews__grid">
      <article class="product-reviews__card">
        <div class="product-reviews__rating" role="img" aria-label="Rated 5 out of 5 stars">
          <span aria-hidden="true">★★★★★</span>
        </div>
        <blockquote class="product-reviews__quote">
          “The structured weekly reflections have transformed how our leadership team stays aligned and accountable.”
        </blockquote>
        <footer class="product-reviews__footer">
          <p class="product-reviews__reviewer">Adrian Chen</p>
          <p class="product-reviews__role">Chief Operating Officer, Verge Labs</p>
        </footer>
      </article>
      <article class="product-reviews__card">
        <div class="product-reviews__rating" role="img" aria-label="Rated 5 out of 5 stars">
          <span aria-hidden="true">★★★★★</span>
        </div>
        <blockquote class="product-reviews__quote">
          “Our clients rave about the calm it brings to their week. It's the rare tool that feels human-first and data-smart.”
        </blockquote>
        <footer class="product-reviews__footer">
          <p class="product-reviews__reviewer">Marissa Patel</p>
          <p class="product-reviews__role">Founder, Northstar Consulting</p>
        </footer>
      </article>
      <article class="product-reviews__card">
        <div class="product-reviews__rating" role="img" aria-label="Rated 5 out of 5 stars">
          <span aria-hidden="true">★★★★★</span>
        </div>
        <blockquote class="product-reviews__quote">
          “It quickly became the ritual our remote teams look forward to. Engagement is up and the insights are gold.”
        </blockquote>
        <footer class="product-reviews__footer">
          <p class="product-reviews__reviewer">Luis Romero</p>
          <p class="product-reviews__role">Director of People Operations, Brightwave</p>
        </footer>
      </article>
    </div>

    <div class="product-reviews__cta">
      <p>Want to see how Ritual fits your workflow? Let’s walk through it together.</p>
      <a class="button button--ghost" href="/pages/contact">Book a live walkthrough</a>
    </div>
  </div>
</section>
