{% assign product = all_products['mental-health-workbook-3-books-in-1-cognitive-and-dialectical-behavioral-therapy-acceptance-and-commitment-therapy-cbt-dbt-act'] %}
{% assign available_variant = product.first_available_variant %}
{% assign is_available = false %}
{% if product and product.available and available_variant and available_variant.available %}
  {% assign is_available = true %}
{% endif %}
<div class="therapist-landing-page">
  <style>
    .therapist-landing-page {
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      color: #1f2933;
      background: #f7f8fa;
      padding-bottom: 4rem;
    }
    .therapist-landing-page .container {
      max-width: 1080px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }
    .therapist-landing-page h1,
    .therapist-landing-page h2,
    .therapist-landing-page h3 {
      color: #101620;
    }
    .hero {
      display: grid;
      gap: 2rem;
      align-items: center;
      padding: 4rem 0 2rem;
    }
    .hero-image img {
      width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 20px 45px rgba(15, 23, 42, 0.15);
      background: #fff;
    }
    .hero-content h1 {
      font-size: clamp(2.4rem, 5vw, 3.2rem);
      margin-bottom: 1rem;
      line-height: 1.2;
    }
    .hero-content p {
      font-size: 1.1rem;
      line-height: 1.7;
      margin-bottom: 1.5rem;
      color: #475569;
    }
    .buy-now {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.9rem 2.5rem;
      background: #2563eb;
      color: #fff;
      border: none;
      border-radius: 999px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease;
      text-decoration: none;
      min-width: 200px;
    }
    .buy-now[disabled] {
      cursor: not-allowed;
      background: #94a3b8;
    }
    .buy-now:not([disabled]):hover,
    .buy-now:not([disabled]):focus {
      background: #1d4ed8;
    }
    .buy-now__message {
      margin-top: 0.75rem;
      color: #dc2626;
      min-height: 1.2rem;
      font-size: 0.95rem;
    }
    .benefits {
      background: #fff;
      padding: 3rem 0;
      border-radius: 12px;
      margin: 3rem auto;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
    }
    .benefits h2 {
      text-align: center;
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
    }
    .benefits ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem 2rem;
    }
    .benefits li {
      padding-left: 1.75rem;
      position: relative;
      font-size: 1.05rem;
      line-height: 1.6;
      color: #334155;
    }
    .benefits li::before {
      content: '\2713';
      position: absolute;
      left: 0;
      top: 0;
      color: #2563eb;
      font-weight: 700;
    }
    .gallery {
      margin: 3rem 0;
    }
    .gallery h2 {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }
    .gallery-grid img {
      width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.12);
      background: #fff;
    }
    .testimonials {
      background: #fff;
      border-radius: 12px;
      padding: 3rem 0;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
      margin-bottom: 3rem;
    }
    .testimonials h2 {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .testimonial-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.5rem;
    }
    .testimonial {
      background: #f8fafc;
      border-radius: 10px;
      padding: 1.5rem;
      font-size: 1rem;
      line-height: 1.6;
      color: #1f2933;
    }
    .testimonial span {
      display: block;
      margin-top: 0.75rem;
      font-weight: 600;
      color: #2563eb;
      font-size: 0.95rem;
    }
    .faq {
      padding: 3rem 0;
    }
    .faq h2 {
      text-align: center;
      margin-bottom: 2rem;
    }
    .faq-item {
      background: #fff;
      border-radius: 10px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.06);
    }
    .faq-item h3 {
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
    }
    .faq-item p {
      margin: 0;
      color: #475569;
      line-height: 1.6;
    }
    .sticky-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(15, 23, 42, 0.95);
      color: #fff;
      padding: 0.75rem 1.25rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      z-index: 30;
    }
    .sticky-bar-price {
      font-weight: 600;
      font-size: 1rem;
    }
    .sticky-bar .buy-now {
      padding: 0.65rem 1.75rem;
      min-width: auto;
      font-size: 0.95rem;
    }
    @media (min-width: 1024px) {
      .hero {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    @media (min-width: 768px) {
      .sticky-bar {
        display: none;
      }
    }
    @media (max-width: 480px) {
      .hero {
        padding-top: 3rem;
      }
    }
  </style>
  {% if product == blank %}
    <div class="container">
      <p>Product not found. Please check back later.</p>
    </div>
  {% else %}
    <section class="hero container">
      <div class="hero-image">
        {% if product.featured_image %}
          <img src="{{ product.featured_image | image_url: width: 960 }}" alt="{{ product.title | escape }}" loading="lazy">
        {% endif %}
      </div>
      <div class="hero-content">
        <h1>Therapist-Approved Mental Health Workbook Bundle</h1>
        <p>Equip your sessions with a comprehensive CBT, DBT, and ACT toolkit designed for modern therapists. Streamline planning, deliver evidence-based exercises, and support every client with confidence.</p>
        <button class="buy-now js-buy-now" type="button" data-variant-id="{{ available_variant.id }}" {% unless is_available %}disabled{% endunless %}>
          {% if is_available %}
            Buy Now · {{ available_variant.price | default: product.price | money }}
          {% else %}
            Sold Out
          {% endif %}
        </button>
        <p class="buy-now__message" role="status" aria-live="polite"></p>
        <p style="font-size: 0.9rem; color: #64748b; margin-top: 1rem;">Instant digital download • Secure checkout • Lifetime therapist license</p>
      </div>
    </section>

    <section class="benefits container">
      <h2>Why therapists rely on this workbook</h2>
      <ul>
        <li>Save hours every week with ready-to-use session materials.</li>
        <li>Used by 10,000+ therapists and mental health professionals.</li>
        <li>Professionally designed visuals enhance client engagement.</li>
        <li>Printable worksheets optimized for individual and group sessions.</li>
        <li>Guided CBT, DBT, and ACT plans to support diverse client needs.</li>
      </ul>
    </section>

    {% assign gallery_images = product.media | where: 'media_type', 'image' %}
    {% if gallery_images.size > 0 %}
      <section class="gallery container">
        <h2>Inside the workbook bundle</h2>
        <div class="gallery-grid">
          {% for media in gallery_images limit: 6 %}
            <div>
              <img src="{{ media | image_url: width: 720 }}" alt="Workbook preview {{ forloop.index }}" loading="lazy">
            </div>
          {% endfor %}
        </div>
      </section>
    {% endif %}

    <section class="testimonials container">
      <h2>Trusted by practicing therapists</h2>
      <div class="testimonial-grid">
        <div class="testimonial">
          “My clients love the clarity of these worksheets. They feel structured yet compassionate.”
          <span>— Dr. Alexis M., PsyD</span>
        </div>
        <div class="testimonial">
          “The DBT modules alone are worth it. I can tailor sessions instantly without extra prep.”
          <span>— Jordan L., LCSW</span>
        </div>
        <div class="testimonial">
          “Professional design makes a big difference. Clients stay engaged and complete their homework.”
          <span>— Priya K., LMFT</span>
        </div>
        <div class="testimonial">
          “It’s the best digital toolkit I’ve purchased for my private practice—organized and impactful.”
          <span>— Ethan R., LPC</span>
        </div>
      </div>
    </section>

    <section class="faq container">
      <h2>Frequently asked questions</h2>
      <div class="faq-item">
        <h3>Is this a digital product?</h3>
        <p>Yes. You’ll receive instant digital access to the full workbook bundle after checkout.</p>
      </div>
      <div class="faq-item">
        <h3>Can I print the materials?</h3>
        <p>Absolutely. The files are optimized for high-quality printing and can be reused indefinitely.</p>
      </div>
      <div class="faq-item">
        <h3>What license is included?</h3>
        <p>Your purchase includes a lifetime license for use with your clients and within your practice.</p>
      </div>
      <div class="faq-item">
        <h3>What is your refund policy?</h3>
        <p>If you’re unsatisfied for any reason within 14 days, contact us and we’ll make it right.</p>
      </div>
    </section>

    <div class="sticky-bar" {% unless is_available %}style="display:none;"{% endunless %}>
      <span class="sticky-bar-price">{{ available_variant.price | default: product.price | money }}</span>
      <button class="buy-now js-buy-now" type="button" data-variant-id="{{ available_variant.id }}" {% unless is_available %}disabled{% endunless %}>
        Buy Now
      </button>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var buyButtons = document.querySelectorAll('.js-buy-now');
        var messageEl = document.querySelector('.buy-now__message');
        var isAvailable = {{ is_available | default: false | json }};

        if (!isAvailable) {
          buyButtons.forEach(function(button) {
            button.setAttribute('disabled', 'disabled');
          });
          return;
        }

        buyButtons.forEach(function(button) {
          button.addEventListener('click', function() {
            if (button.hasAttribute('disabled')) {
              return;
            }

            var variantId = button.getAttribute('data-variant-id');
            if (!variantId) {
              if (messageEl) {
                messageEl.textContent = 'Please try again.';
              }
              return;
            }

            buyButtons.forEach(function(btn) {
              btn.setAttribute('disabled', 'disabled');
            });
            if (messageEl) {
              messageEl.textContent = '';
            }

            fetch('/cart/add.js', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
              },
              body: JSON.stringify({ id: variantId, quantity: 1 })
            })
              .then(function(response) {
                if (!response.ok) {
                  throw new Error('Network response was not ok');
                }
                return response.json();
              })
              .then(function() {
                window.location = '/checkout';
              })
              .catch(function() {
                if (messageEl) {
                  messageEl.textContent = 'Please try again.';
                }
                buyButtons.forEach(function(btn) {
                  btn.removeAttribute('disabled');
                });
              });
          });
        });
      });
    </script>

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Product",
        "name": "{{ product.title | escape }}",
        "description": "{{ product.description | strip_html | truncate: 160 | escape }}",
        "image": [{% if product.featured_image %}"{{ product.featured_image | image_url: width: 960 }}"{% endif %}],
        "sku": "{{ available_variant.sku | escape }}",
        "offers": {
          "@type": "Offer",
          "priceCurrency": "{{ shop.currency }}",
          "price": "{{ product.price | money_without_currency | strip_html | replace: ',', '' }}",
          "availability": "https://schema.org/{% if product.available %}InStock{% else %}OutOfStock{% endif %}"
        }
      }
    </script>
  {% endif %}
</div>
